<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>折腾日志之WTG/LTG | IFDESS' BLOG</title>
<meta name=keywords content="Ventoy,WTG,Linux,折腾"><meta name=description content="也有一段时间没有写博客了，记录一下最近的折腾经历。最近依然是不务正业的研究一些小东西，说是研究，其实也不过是学习其他大佬的方法和思路，说抄作业应该更恰当。"><meta name=author content="IFDESS"><link rel=canonical href=https://ifdess.github.io/posts/9vetgwtg/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://ifdess.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://ifdess.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://ifdess.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://ifdess.github.io/apple-touch-icon.png><link rel=mask-icon href=https://ifdess.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://ifdess.github.io/posts/9vetgwtg/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta name=viewport content="width=device-width,initial-scale=.9"><script>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="折腾日志之WTG/LTG"><meta property="og:description" content="也有一段时间没有写博客了，记录一下最近的折腾经历。最近依然是不务正业的研究一些小东西，说是研究，其实也不过是学习其他大佬的方法和思路，说抄作业应该更恰当。"><meta property="og:type" content="article"><meta property="og:url" content="https://ifdess.github.io/posts/9vetgwtg/"><meta property="og:image" content="https://oss.ifdess.cn/img/linuxwin.webp"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-01-09T10:15:01+08:00"><meta property="article:modified_time" content="2024-01-09T10:15:01+08:00"><meta property="og:site_name" content="IFDESS' BLOG"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://oss.ifdess.cn/img/linuxwin.webp"><meta name=twitter:title content="折腾日志之WTG/LTG"><meta name=twitter:description content="也有一段时间没有写博客了，记录一下最近的折腾经历。最近依然是不务正业的研究一些小东西，说是研究，其实也不过是学习其他大佬的方法和思路，说抄作业应该更恰当。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://ifdess.github.io/posts/"},{"@type":"ListItem","position":2,"name":"折腾日志之WTG/LTG","item":"https://ifdess.github.io/posts/9vetgwtg/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"折腾日志之WTG/LTG","name":"折腾日志之WTG\/LTG","description":"也有一段时间没有写博客了，记录一下最近的折腾经历。最近依然是不务正业的研究一些小东西，说是研究，其实也不过是学习其他大佬的方法和思路，说抄作业应该更恰当。\n","keywords":["Ventoy","WTG","Linux","折腾"],"articleBody":"也有一段时间没有写博客了，记录一下最近的折腾经历。最近依然是不务正业的研究一些小东西，说是研究，其实也不过是学习其他大佬的方法和思路，说抄作业应该更恰当。\n折腾的起点 那天在逛别人的博客，发现一个比较有意思的项目 ，是一个网页的聊天室。开源真是世界上最伟大的行为，之一。作为一个刚接触网站和服务器的小白，自然经受不住项目的诱惑。\n我打算用本地的Docker容器先部署一遍。我尝试过用服务器的Docker，由于需要修改项目文件，就需要挂载容器文件或者进入容器内部。我有一点强迫症，服务器不大，我想要尽可能的保证服务器文件系统的整洁，还需要项目可以打包。我不想挂载容器里的文件，但是我用VSCode连接服务器里的容器会导致服务器卡死，所以只能用本地容器修改好后打包到服务器部署。\n问题一 由此引出了第一个问题，我一直以来都是用的Win10 LTSC 2019的版本，这个版本已经是5年前发布的了，不支持Docker Desktop。\n尝试解决 尝试了另一种叫什么docker tool的工具，但是这个工具也早就停止开发了，用起来各种问题。\n经过搜索，网上说LTSC 2021版支持docker，我用U盘做了WTG，确实可以安装docker，但是docker引擎启动不了，找了很久也没找到解决办法。\n最后尝试了Win11，总算没问题了。不过WSL2在Win11上用起来也就勉勉强强，因为docker desktop占用了太多性能。\n问题二 大概是第二天我在岗位上摸鱼调试容器，切换到工作的WTG做了点工作，当我再回到Win11的WTG时，第二个问题出现了。Win11开不了机了，开机还没进入桌面直接卡死，只能强制关机，我裂开来。\n尝试解决 重启多次后，更离谱的事情出现了，蓝屏了我去。也算有了头绪，因为蓝屏的原因大概率是驱动出了问题。于是我重新制作Win11的WTG，可以开机，整个安装过程完全没问题。按照习惯我设置好所有东西后，重启一次准备备份镜像，问题又出现了，开机直接蓝屏，我整个人都不好了。\n还是同一个蓝屏代码，我除了系统自带的设置什么也没安装，判断应该是联网后系统自动安装了某驱动。我又开始了重装Win11，确实没有问题。\n到此，Win11蓝屏的原因被确诊为公司电脑老旧，硬件兼容性出现问题。\n新需求-新尝试 晚上回到家，我体验了一下Win11，在界面上确实更加现代化，但是用起来远不如我的LTSC。11系统预装了太多对我没用的东西，加上不太习惯11的操作，Win11没有留下我的心，我决定给我的U盘安装两个系统，一个Win11，另一个LTSC。Win11用来玩docker，win10用来日常使用和办公。\n旧方案 在之前大学的时候玩过一段时间双系统，用的是多系统分区+编辑引导文件的方式。\n用MBROSTool打造BIOS/UEFI多PE+WTG+Linux+凤凰+苹果系统启动维护.. ——萝卜头IT论坛\n但是这个方式有一些缺点：\n系统分区的大小几乎是从一开始就固定了，后续调整有风险，可能会导致两个系统崩掉。\n部署很麻烦，引导文件编辑很麻烦。\n两个系统之间文件访问可能会带来大麻烦，有比较大的概率会把引导文件搞坏。\n……\n玩过了，我不喜欢。\n新方案 于是我采用了全新的方式，Ventoy+VHDX虚拟磁盘。\nVHD/VHDX常见问题解答 ——萝卜头IT论坛\nVentoy：新一代多系统启动U盘解决方案 优点有很多：\n系统分区大小可以灵活设置，随时更改。\n部署方便，不用修改引导文件。\n由于这种方式有两层引导，两个系统之间的访问不会影响引导文件。\nU盘空闲的部分可以作为所有系统的公共空间，直接访问公共空间很便捷还没有风险。\nVHDX可以用差分，秒备份，秒还原。一个基础系统可以差分出多个用途的子系统，节省空间的同时体验多系统。\n……\n我想试试新的。\n差分VHD 系统秒备份、秒还原教程 完胜GHOST ——萝卜头IT论坛\n第二天上班就开始实施，先是制作Win10，一切顺利。\n问题三 开始制作Win11，由于先前的经验，我直接拔掉网线，全程离线制作。部署过程还是顺利的，我把部署之后的Win11.VHDX放到Ventoy里面。Win11，启动！完蛋！问题出现，部署还没完成，好像提示计算机管理配置有问题（有点忘了）。\n尝试解决 之前部署过多次的成功经历，让我并没有把这个问题当成难题，自认为是写入文件时出现了一些偏差，于是我重新制作，启动！——失败*2。\n尝试两次之后，我意识到一定和部署时的设置有关系。VHDX两段引导的特性不同于之前，两次引导成功才后会进入系统安装流程，而报错出现在安装流程之后大概2分钟。这个阶段是设置用户账号的阶段。恰好有一个设置是“跳过OOBE阶段”，这个设置就是直接默认使用Administrator账号。我又一次重新部署，启动！——还是失败。\n一般来讲，如果系统启动失败，会自动进入系统自带的恢复环境，而系统初次安装是否会调用恢复环境呢，需要试验。我取消勾选“禁用WinRE”，启动！——依旧是失败。\n我并没有把希望寄托在第3点上，那只是一个小尝试。继续分析，从之前使用Win10.VHDX的时候观察到的，在两次引导成功后，VHDX文件并不会消失，VHDX系统和VHDX文件本体即使是在启动成功的之后也依旧保持着脐带般的联系，系统的读写依然是在对VHDX文件的本体进行操作。是了，问题点找到了，操作文件的需要索引地址，而windows中的绝对路径包含了盘符。在部署的时候有两个设置都和盘符有关，分别是“屏蔽本机盘符”和“无默认盘符”。\n我最多只需要实验三次就能成功，三次之后果然成功了，需要同时取消“屏蔽本机盘符”和“无默认盘符”才能顺利安装系统。\n回顾问题二 因为VHDX差分的特性，我可以不需要反复重装系统去找到导致Win11蓝屏的驱动。因为如果不找到解决办法，我的Win11系统就只敢用在我自己的电脑使用，作为Windows To Go系统，却不能“To Go”该是多么遗憾的一件事情。\n我差分出好几份系统备用，我进入系统one by one的给每一个硬件打上驱动。可是！当所有驱动全部装上后，本该蓝屏的系统却正常得不能再正常了。用备用系统再一次试验后，确定了，和驱动没有半毛钱关系。我又怀疑是网络的锅，或是自动更新的锅。我完全搞不明白了，这根本就不会蓝屏。难道我真的遇到玄学问题了吗？这个Bug或许只会出现在传统方式部署的系统上，VHDX大法在兼容性上面依旧遥遥领先。\n精力有限，这个问题就留在这里吧，Bug11在这几天几乎消耗掉了我对它的所有好感。已经部署好的Win11我应该也不会去用，就让它尘封在U盘里吧。在稳定实用这方面，依旧没有一个版本比得过LTSC，颇有一种先贤（Win7）已故，而后继无人的落寞。\nDocker的另一条路 不用Win11，Docker还搞不搞？当然要搞。众所周知，哪有程序员用Windows搞开发？Linux不香吗？前面说到多系统的新方式（Ventoy+VHDX），其实Ventoy还可以用来启动Linux。\n有三种方式：\n直接启动Linux.iso镜像文件当作Live系统。这种方式属于临时使用，重启会重置Live系统中的所有文件和设置，每一次开机都是新的系统。\n启动提前制作好的Linux.vhd.vtoy文件。Linux.vhd.vtoy就是一个实机系统，和直接安装的系统没有任何区别，实现Linux To Go。\n在第1点的基础上，使用数据持久化。字面意思，弥补了不能保存数据和设置的缺陷。\n探索Linux的不归路 Linux系统是一个庞大而繁多的家族，其多样性体现在不同的发行版、桌面环境和内核版本上。作为一个开源操作系统，Linux吸引了全球范围内的开发者和社区参与者，他们共同为Linux的不断发展和演进做出了巨大的贡献。 —— ChatGPT\n从Debian、Ubuntu、Fedora到Arch Linux，每个发行版都有其独特的特点和面向特定用户群的设计理念。桌面环境方面，GNOME、KDE、XFCE等提供了各种不同的用户界面选择，满足了不同用户对于操作系统外观和体验的个性化需求。 —— ChatGPT\n对于刚接触Linux的人来说，选择一个自己喜欢的或者适合自己的Linux系统并不是一件容易的事。为了省事，我只尝试了distrowatch排行榜上前10的操作系统，你不会以为只有10个吧？每种个系统都有不同的桌面环境，我尝试了4种。\n好在有Live镜像，依然是花了很多时间去尝试不同的发行版，每一个发行版都像是一个独特的玩具，这是Window所不能具有的新鲜感。最终我选择了几款发行版，是的，Ventoy并不会介意我海王般的选择。\n基础的Linux系统并没有桌面系统，一般用于服务器，我是在电脑上使用，自然是需要Linux Desktop版，桌面环境就像是一件衣服，衣服分为好几类，每一类又可以有不同的装饰。经过多次尝试，最终选定了GNOME，默认就是dock栏+状态栏。几乎完全不同于Windows，说真的，Windows真的玩腻了。GNOME省心，不用像KDE那样繁琐的设置，花里胡哨的玩不动了。也不像XFCE那样原始简陋，XFCE总会让我想起Windows，长得太像Win的私生子了（个人觉得）。\n在此简单介绍一下我的各位Linux后妃：\nArch，A教教徒所信仰的Linux之神，这是一个完全听话的神。\nManjaro，A教异教徒最贴心的棉袄，美丽、可靠且优雅，我的梦中情人。\nMint，我愿称之为U系最得意大弟子，居distrowatch排行榜第二（第一的排名是刷的），是我的Linux白月光。\nUbuntu和Debian，作为U系和D系始祖，万物之起源，至今于网络世界中留有巨量的传说（教程）。\n总结 这次的折腾经历长达10天+，对于公司我是心存愧疚的，毕竟白嫖工资多少说不过去。还有很多事情没有提到，下次再说了：hackchat项目、fiora项目、网页聊天室的发展历史、docusaurus项目、意外删除工作资料、CHIPFANCIER UME。为了解决docker问题，引出了一大堆事情，真的忙死我了。\n乱七八糟列一下心得吧，不枉这时光了：\n学会了列点，条理明了很重要。\n接受不完美，不要为了不重要的的细节浪费时间和精力。\nDocker是一项伟大的发明，容器化带来的好处吃过的都说香。\nWin11是屎般的难吃（没吃过屎）。\nLinux好吃不腻。\nVentoy功能性、兼容性、易用性在同类型软件中无敌。缺点暂时没想到。\nWTGA使用VHDX方式部署Win11时不要勾选“屏蔽本机盘符”和“无默认盘符”，可以部署完成后设置。\nVHDX必须要安装完成后再用Ventoy，Ventoy疑似不能引导Windows安装程序。\n安装WTG时最好是拔出可移动磁盘并且脱机其他盘，否则会有莫名其妙的问题。\n第7点教程参考：\nWindows To Go屏蔽本机硬盘教程 ——萝卜头IT论坛\n第8点解决方案参考：\n使用Ventoy启动Windows To Go](https://bbs.luobotou.org/thread-47574-1-1.html ) ——萝卜头IT论坛\n总算告一段落了，今年也快结束了。\n","wordCount":"4430","inLanguage":"zh","image":"https://oss.ifdess.cn/img/linuxwin.webp","datePublished":"2024-01-09T10:15:01+08:00","dateModified":"2024-01-09T10:15:01+08:00","author":{"@type":"Person","name":"IFDESS"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://ifdess.github.io/posts/9vetgwtg/"},"publisher":{"@type":"Organization","name":"IFDESS' BLOG","logo":{"@type":"ImageObject","url":"https://ifdess.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://ifdess.github.io/ accesskey=h title="IFDESS' BLOG (Alt + H)"><img src=https://ifdess.github.io/apple-touch-icon.png alt aria-label=logo height=35>IFDESS' BLOG</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="26" height="26" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://ifdess.github.io/series/ title=系列><span>系列</span></a></li><li><a href=https://ifdess.github.io/categories/ title=分类><span>分类</span></a></li><li><a href=https://ifdess.github.io/tags/ title=标签><span>标签</span></a></li><li><a href=https://ifdess.github.io/archives/ title=归档><span>归档</span></a></li><li><a href=https://ifdess.github.io/search/ title="搜索 (Alt + /)" accesskey=/><span>搜索</span></a></li><li><a href=https://ifdess.github.io/about/ title=关于><span>关于</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://ifdess.github.io/>主页</a>&nbsp;»&nbsp;<a href=https://ifdess.github.io/posts/>文章</a></div><h1 class=post-title>折腾日志之WTG/LTG</h1><div class=post-meta><span title='2024-01-09 10:15:01 +0800 CST'>一月 9, 2024</span>&nbsp;·&nbsp;9 分钟&nbsp;·&nbsp;4430 字&nbsp;·&nbsp;IFDESS</div><ul class=post-tags><a href=/categories/%E6%8A%80%E6%9C%AF>技术</a>
<a href=/series/%E7%94%9F%E5%91%BD%E5%9C%A8%E4%BA%8E%E6%B5%AA%E8%B4%B9%E4%B9%9F%E5%9C%A8%E4%BA%8E%E6%8A%98%E8%85%BE>生命在于浪费，也在于折腾</a><li><a href=https://ifdess.github.io/tags/ventoy/>Ventoy</a></li><li><a href=https://ifdess.github.io/tags/wtg/>WTG</a></li><li><a href=https://ifdess.github.io/tags/linux/>Linux</a></li><li><a href=https://ifdess.github.io/tags/%E6%8A%98%E8%85%BE/>折腾</a></li></ul></header><figure class=cover-in><img loading=eager src=https://oss.ifdess.cn/img/linuxwin.webp alt></figure><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#折腾的起点>折腾的起点</a></li><li><a href=#问题一>问题一</a><ul><li><a href=#尝试解决>尝试解决</a></li></ul></li><li><a href=#问题二>问题二</a><ul><li><a href=#尝试解决-1>尝试解决</a></li></ul></li><li><a href=#新需求-新尝试>新需求-新尝试</a><ul><li><a href=#旧方案>旧方案</a></li><li><a href=#新方案>新方案</a></li></ul></li><li><a href=#问题三>问题三</a><ul><li><a href=#尝试解决-2>尝试解决</a></li></ul></li><li><a href=#回顾问题二>回顾问题二</a></li><li><a href=#docker的另一条路>Docker的另一条路</a></li><li><a href=#探索linux的不归路>探索Linux的不归路</a></li><li><a href=#总结>总结</a></li></ul></nav></div></details></div><div class=post-content><p>也有一段时间没有写博客了，记录一下最近的折腾经历。最近依然是不务正业的研究一些小东西，说是研究，其实也不过是学习其他大佬的方法和思路，说抄作业应该更恰当。</p><h2 id=折腾的起点>折腾的起点<a hidden class=anchor aria-hidden=true href=#折腾的起点>#</a></h2><p>那天在逛别人的博客，发现一个比较有意思的<a href=https://moe.blog/fiora.html target=_blank>项目</a>
，是一个网页的聊天室。开源真是世界上最伟大的行为，之一。作为一个刚接触网站和服务器的小白，自然经受不住项目的诱惑。</p><p><img loading=lazy src=https://oss.ifdess.cn/img/fiora.webp#center alt=fiora></p><p>我打算用本地的Docker容器先部署一遍。我尝试过用服务器的Docker，由于需要修改项目文件，就需要挂载容器文件或者进入容器内部。我有一点强迫症，服务器不大，我想要尽可能的保证服务器文件系统的整洁，还需要项目可以打包。我不想挂载容器里的文件，但是我用VSCode连接服务器里的容器会导致服务器卡死，所以只能用本地容器修改好后打包到服务器部署。</p><h2 id=问题一>问题一<a hidden class=anchor aria-hidden=true href=#问题一>#</a></h2><p>由此引出了第一个问题，我一直以来都是用的Win10 LTSC 2019的版本，这个版本已经是5年前发布的了，不支持Docker Desktop。</p><h3 id=尝试解决>尝试解决<a hidden class=anchor aria-hidden=true href=#尝试解决>#</a></h3><ol><li><p>尝试了另一种叫什么docker tool的工具，但是这个工具也早就停止开发了，用起来各种问题。</p></li><li><p>经过搜索，网上说LTSC 2021版支持docker，我用U盘做了WTG，确实可以安装docker，但是docker引擎启动不了，找了很久也没找到解决办法。</p></li><li><p>最后尝试了Win11，总算没问题了。不过WSL2在Win11上用起来也就勉勉强强，因为docker desktop占用了太多性能。</p></li></ol><h2 id=问题二>问题二<a hidden class=anchor aria-hidden=true href=#问题二>#</a></h2><p>大概是第二天我在岗位上摸鱼调试容器，切换到工作的WTG做了点工作，当我再回到Win11的WTG时，第二个问题出现了。Win11开不了机了，开机还没进入桌面直接卡死，只能强制关机，我裂开来。</p><h3 id=尝试解决-1>尝试解决<a hidden class=anchor aria-hidden=true href=#尝试解决-1>#</a></h3><p>重启多次后，更离谱的事情出现了，蓝屏了我去。也算有了头绪，因为蓝屏的原因大概率是驱动出了问题。于是我重新制作Win11的WTG，可以开机，整个安装过程完全没问题。按照习惯我设置好所有东西后，重启一次准备备份镜像，问题又出现了，开机直接蓝屏，我整个人都不好了。</p><p>还是同一个蓝屏代码，我除了系统自带的设置什么也没安装，判断应该是联网后系统自动安装了某驱动。我又开始了重装Win11，确实没有问题。</p><p>到此，Win11蓝屏的原因被确诊为公司电脑老旧，硬件兼容性出现问题。</p><h2 id=新需求-新尝试>新需求-新尝试<a hidden class=anchor aria-hidden=true href=#新需求-新尝试>#</a></h2><p>晚上回到家，我体验了一下Win11，在界面上确实更加现代化，但是用起来远不如我的LTSC。11系统预装了太多对我没用的东西，加上不太习惯11的操作，Win11没有留下我的心，我决定给我的U盘安装两个系统，一个Win11，另一个LTSC。Win11用来玩docker，win10用来日常使用和办公。</p><h3 id=旧方案>旧方案<a hidden class=anchor aria-hidden=true href=#旧方案>#</a></h3><p>在之前大学的时候玩过一段时间双系统，用的是多系统分区+编辑引导文件的方式。</p><blockquote><p><a href=https://bbs.luobotou.org/thread-43549-1-1.html target=_blank>用MBROSTool打造BIOS/UEFI多PE+WTG+Linux+凤凰+苹果系统启动维护..</a>
——萝卜头IT论坛</p></blockquote><p>但是这个方式有一些缺点：</p><ol><li><p>系统分区的大小几乎是从一开始就固定了，后续调整有风险，可能会导致两个系统崩掉。</p></li><li><p>部署很麻烦，引导文件编辑很麻烦。</p></li><li><p>两个系统之间文件访问可能会带来大麻烦，有比较大的概率会把引导文件搞坏。</p></li><li><p>……</p></li><li><p>玩过了，我不喜欢。</p></li></ol><h3 id=新方案>新方案<a hidden class=anchor aria-hidden=true href=#新方案>#</a></h3><p>于是我采用了全新的方式，Ventoy+VHDX虚拟磁盘。</p><blockquote><p><a href=https://bbs.luobotou.org/thread-5964-1-1.html target=_blank>VHD/VHDX常见问题解答</a>
——萝卜头IT论坛</p></blockquote><blockquote><p><a href=https://www.ventoy.net/cn/doc_news.html target=_blank>Ventoy：新一代多系统启动U盘解决方案</a></p></blockquote><p>优点有很多：</p><ol><li><p>系统分区大小可以灵活设置，随时更改。</p></li><li><p>部署方便，不用修改引导文件。</p></li><li><p>由于这种方式有两层引导，两个系统之间的访问不会影响引导文件。</p></li><li><p>U盘空闲的部分可以作为所有系统的公共空间，直接访问公共空间很便捷还没有风险。</p></li><li><p>VHDX可以用差分，秒备份，秒还原。一个基础系统可以差分出多个用途的子系统，节省空间的同时体验多系统。</p></li><li><p>……</p></li><li><p>我想试试新的。</p></li></ol><blockquote><p><a href=https://bbs.luobotou.org/thread-7644-1-1.html target=_blank>差分VHD 系统秒备份、秒还原教程 完胜GHOST</a>
——萝卜头IT论坛</p></blockquote><p>第二天上班就开始实施，先是制作Win10，一切顺利。</p><h2 id=问题三>问题三<a hidden class=anchor aria-hidden=true href=#问题三>#</a></h2><p>开始制作Win11，由于先前的经验，我直接拔掉网线，全程离线制作。部署过程还是顺利的，我把部署之后的Win11.VHDX放到Ventoy里面。Win11，启动！完蛋！问题出现，部署还没完成，好像提示计算机管理配置有问题（有点忘了）。</p><h3 id=尝试解决-2>尝试解决<a hidden class=anchor aria-hidden=true href=#尝试解决-2>#</a></h3><p><img loading=lazy src=https://oss.ifdess.cn/img/wtga.webp#center alt=wtga></p><ol><li><p>之前部署过多次的成功经历，让我并没有把这个问题当成难题，自认为是写入文件时出现了一些偏差，于是我重新制作，启动！——失败*2。</p></li><li><p>尝试两次之后，我意识到一定和部署时的设置有关系。VHDX两段引导的特性不同于之前，两次引导成功才后会进入系统安装流程，而报错出现在安装流程之后大概2分钟。这个阶段是设置用户账号的阶段。恰好有一个设置是“跳过OOBE阶段”，这个设置就是直接默认使用Administrator账号。我又一次重新部署，启动！——还是失败。</p></li><li><p>一般来讲，如果系统启动失败，会自动进入系统自带的恢复环境，而系统初次安装是否会调用恢复环境呢，需要试验。我取消勾选“禁用WinRE”，启动！——依旧是失败。</p></li><li><p>我并没有把希望寄托在第3点上，那只是一个小尝试。继续分析，从之前使用Win10.VHDX的时候观察到的，在两次引导成功后，VHDX文件并不会消失，VHDX系统和VHDX文件本体即使是在启动成功的之后也依旧保持着脐带般的联系，系统的读写依然是在对VHDX文件的本体进行操作。是了，问题点找到了，操作文件的需要索引地址，而windows中的绝对路径包含了盘符。在部署的时候有两个设置都和盘符有关，分别是“屏蔽本机盘符”和“无默认盘符”。</p></li><li><p>我最多只需要实验三次就能成功，三次之后果然成功了，需要同时取消“屏蔽本机盘符”和“无默认盘符”才能顺利安装系统。</p></li></ol><h2 id=回顾问题二>回顾问题二<a hidden class=anchor aria-hidden=true href=#回顾问题二>#</a></h2><p>因为VHDX差分的特性，我可以不需要反复重装系统去找到导致Win11蓝屏的驱动。因为如果不找到解决办法，我的Win11系统就只敢用在我自己的电脑使用，作为Windows To Go系统，却不能“To Go”该是多么遗憾的一件事情。</p><p>我差分出好几份系统备用，我进入系统one by one的给每一个硬件打上驱动。可是！当所有驱动全部装上后，本该蓝屏的系统却正常得不能再正常了。用备用系统再一次试验后，确定了，和驱动没有半毛钱关系。我又怀疑是网络的锅，或是自动更新的锅。我完全搞不明白了，这根本就不会蓝屏。难道我真的遇到玄学问题了吗？这个Bug或许只会出现在传统方式部署的系统上，VHDX大法在兼容性上面依旧遥遥领先。</p><p>精力有限，这个问题就留在这里吧，Bug11在这几天几乎消耗掉了我对它的所有好感。已经部署好的Win11我应该也不会去用，就让它尘封在U盘里吧。在稳定实用这方面，依旧没有一个版本比得过LTSC，颇有一种先贤（Win7）已故，而后继无人的落寞。</p><h2 id=docker的另一条路>Docker的另一条路<a hidden class=anchor aria-hidden=true href=#docker的另一条路>#</a></h2><p>不用Win11，Docker还搞不搞？当然要搞。众所周知，哪有程序员用Windows搞开发？Linux不香吗？前面说到多系统的新方式（Ventoy+VHDX），其实Ventoy还可以用来启动Linux。</p><p>有三种方式：</p><ol><li><p>直接启动Linux.iso镜像文件当作Live系统。这种方式属于临时使用，重启会重置Live系统中的所有文件和设置，每一次开机都是新的系统。</p></li><li><p>启动提前制作好的Linux.vhd.vtoy文件。Linux.vhd.vtoy就是一个实机系统，和直接安装的系统没有任何区别，实现Linux To Go。</p></li><li><p>在第1点的基础上，使用数据持久化。字面意思，弥补了不能保存数据和设置的缺陷。</p></li></ol><h2 id=探索linux的不归路>探索Linux的不归路<a hidden class=anchor aria-hidden=true href=#探索linux的不归路>#</a></h2><blockquote><p>Linux系统是一个庞大而繁多的家族，其多样性体现在不同的发行版、桌面环境和内核版本上。作为一个开源操作系统，Linux吸引了全球范围内的开发者和社区参与者，他们共同为Linux的不断发展和演进做出了巨大的贡献。
—— ChatGPT</p><p>从Debian、Ubuntu、Fedora到Arch Linux，每个发行版都有其独特的特点和面向特定用户群的设计理念。桌面环境方面，GNOME、KDE、XFCE等提供了各种不同的用户界面选择，满足了不同用户对于操作系统外观和体验的个性化需求。
—— ChatGPT</p></blockquote><p>对于刚接触Linux的人来说，选择一个自己喜欢的或者适合自己的Linux系统并不是一件容易的事。为了省事，我只尝试了distrowatch排行榜上前10的操作系统，你不会以为只有10个吧？每种个系统都有不同的桌面环境，我尝试了4种。</p><p>好在有Live镜像，依然是花了很多时间去尝试不同的发行版，每一个发行版都像是一个独特的玩具，这是Window所不能具有的新鲜感。最终我选择了几款发行版，是的，Ventoy并不会介意我海王般的选择。</p><p>基础的Linux系统并没有桌面系统，一般用于服务器，我是在电脑上使用，自然是需要Linux Desktop版，桌面环境就像是一件衣服，衣服分为好几类，每一类又可以有不同的装饰。经过多次尝试，最终选定了GNOME，默认就是dock栏+状态栏。几乎完全不同于Windows，说真的，Windows真的玩腻了。GNOME省心，不用像KDE那样繁琐的设置，花里胡哨的玩不动了。也不像XFCE那样原始简陋，XFCE总会让我想起Windows，长得太像Win的私生子了（个人觉得）。</p><p>在此简单介绍一下我的各位Linux后妃：</p><ul><li><p>Arch，A教教徒所信仰的Linux之神，这是一个完全听话的神。</p></li><li><p>Manjaro，A教异教徒最贴心的棉袄，美丽、可靠且优雅，我的梦中情人。</p></li><li><p>Mint，我愿称之为U系最得意大弟子，居distrowatch排行榜第二（第一的排名是刷的），是我的Linux白月光。</p></li><li><p>Ubuntu和Debian，作为U系和D系始祖，万物之起源，至今于网络世界中留有巨量的传说（教程）。</p></li></ul><h2 id=总结>总结<a hidden class=anchor aria-hidden=true href=#总结>#</a></h2><p>这次的折腾经历长达10天+，对于公司我是心存愧疚的，毕竟白嫖工资多少说不过去。还有很多事情没有提到，下次再说了：hackchat项目、fiora项目、网页聊天室的发展历史、docusaurus项目、意外删除工作资料、CHIPFANCIER UME。为了解决docker问题，引出了一大堆事情，真的忙死我了。</p><p>乱七八糟列一下心得吧，不枉这时光了：</p><ol><li><p>学会了列点，条理明了很重要。</p></li><li><p>接受不完美，不要为了不重要的的细节浪费时间和精力。</p></li><li><p>Docker是一项伟大的发明，容器化带来的好处吃过的都说香。</p></li><li><p>Win11是屎般的难吃（没吃过屎）。</p></li><li><p>Linux好吃不腻。</p></li><li><p>Ventoy功能性、兼容性、易用性在同类型软件中无敌。缺点暂时没想到。</p></li><li><p>WTGA使用VHDX方式部署Win11时不要勾选“屏蔽本机盘符”和“无默认盘符”，可以部署完成后设置。</p></li><li><p>VHDX必须要安装完成后再用Ventoy，Ventoy疑似不能引导Windows安装程序。</p></li><li><p>安装WTG时最好是拔出可移动磁盘并且脱机其他盘，否则会有莫名其妙的问题。</p></li></ol><p>第7点教程参考：</p><blockquote><p><a href=https://bbs.luobotou.org/thread-6778-1-1.html target=_blank>Windows To Go屏蔽本机硬盘教程</a>
——萝卜头IT论坛</p></blockquote><p>第8点解决方案参考：</p><blockquote><p>使用Ventoy启动Windows To Go](<a href=https://bbs.luobotou.org/thread-47574-1-1.html target=_blank>https://bbs.luobotou.org/thread-47574-1-1.html</a>
)
——萝卜头IT论坛</p></blockquote><p>总算告一段落了，今年也快结束了。</p><br><hr><blockquote><p>本文链接：https://ifdess.github.io/posts/9vetgwtg/<br>版权归属：IFDESS' BLOG<br>许可协议：本博客所有文章除特别声明外，均采用 CC BY-NC-SA 4.0 许可协议。</p></blockquote></div><footer class=post-footer><nav class=paginav><a class=prev href=https://ifdess.github.io/posts/10xnxczsjx/><span class=title>« 上一篇</span><br><span>2023总结 & 2024计划</span>
</a><a class=next href=https://ifdess.github.io/posts/8notejxuk/><span class=title>下一篇 »</span><br><span>项目介绍【note.ifdess.cn】</span></a></nav></footer><br><style>.tk-avatar{display:none}textarea.el-textarea__inner{height:150px!important}.el-input-group--prepend .el-input__inner,.el-input-group__append{height:40px!important}.tk-meta-input .el-input .el-input-group__prepend{height:40px}.twikoo .el-input__inner:focus,.twikoo .el-textarea__inner:focus{border-color:#000!important}.tk-row.actions{margin-left:.5rem!important}.tk-action-icon{color:var(--secondary)!important}button.el-button.tk-send.el-button--primary.el-button--small.is-disabled{background-color:rgba(144,147,153,.063);border-color:rgba(144,147,153,.31);color:var(--secondary)}.tk-icon.__comments{color:var(--secondary)!important}.tk-action-link{color:var(--secondary)!important}.el-button--primary{background-color:rgba(144,147,153,.063)!important;border-color:rgba(144,147,153,.31)!important;color:var(--secondary)!important}button.el-button.tk-preview.el-button--default.el-button--small{background-color:rgba(144,147,153,.063)!important;border-color:rgba(144,147,153,.31)!important;color:var(--secondary)!important}.tk-footer{display:none!important}.tk-tag-red{background-color:rgba(144,147,153,.063)!important;border-color:rgba(144,147,153,.31)!important;color:var(--secondary)!important}button.el-button.tk-cancel.el-button--default.el-button--small{background-color:rgba(144,147,153,.063)!important;border-color:rgba(144,147,153,.31)!important;color:var(--secondary)!important}.el-input--small{font-size:15px}.el-button--small,.el-button--small.is-round{padding:9px 13px}.el-button--mini,.el-button--small{font-size:14px}</style><div id=tcomment></div><script src=https://cdn.staticfile.org/twikoo/1.6.31/twikoo.all.min.js></script><script>twikoo.init({envId:"https://tcomment.ifdess.cn/",el:"#tcomment",lang:"zh-CN"})</script></article></main><footer class=footer><span>&copy; 2023 - 2024 <a href=https://ifdess.github.io/>IFDESS' BLOG</a></span>
<span><a href=https://beian.miit.gov.cn/ target=_blank>蜀ICP备2023036728号-1</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="复制";function s(){t.innerHTML="已复制！",setTimeout(()=>{t.innerHTML="复制"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>